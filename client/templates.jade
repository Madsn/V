template(name="Home")
  | {{> Activitycards}}

template(name="Activitycards")
  .row
    each activities
      .col-lg-4.col-md-6.col-xs-12
        .thumbnail.activityimage.text-center
          a(href="activities/{{_id}}")
            img.img-responsive(style="opacity: 0.4", src="{{img}}")
            .caption
              h1= name

template(name="ActivityDashboard")
  h1 Dashboard for Activity {{name}}
  table.table.table-striped
    thead
      tr
        th Rank
        th Name
        th
    tbody
      each players
        tr(class="{{getRowClass}}")
          td= rank
          td= getUsername
          td
            unless equals currentUser._id user
              if alreadyChallenged
                | {{> DeleteChallengeLink getChallengeId }}
              else
                | {{> ChallengeLink }}
  if currentUser
    if userInPlayersList
      button#removeMe.btn.btn-danger Remove me from this list
    else
      button#addMe.btn.btn-primary Add me to this list
      
template(name="ChallengeLink")
  a.challengeLink
    i(id="{{_id}}").clickable.glyphicon.glyphicon-bullhorn

template(name="DeleteChallengeLink")
  a.deleteChallengeLink
    i(id="{{this}}").clickable.glyphicon.glyphicon-remove &nbsp;
  a(href="/challenge/{{this}}")
    i.clickable.glyphicon.glyphicon-eye-open

template(name="Challenges")
  h1 For debugging (Shows ALL challenges, for all players)
  table.table.table-striped
    thead
      tr
        th Activity
        th Challenger
        th Opponent
        th
    tbody
      each challenges
        tr
          td
            a(href="/activities/{{getActivity._id}}") {{getActivity.name}}
          td 
            a(href="/users/playerid/{{challenger}}") {{challengerName}}
          td 
            a(href="/users/playerid/{{opponent}}") {{opponentName}}
          td
            | {{> DeleteChallengeLink _id }}
          
template(name="Challenge")
  h1 Challenge view
  ul
    li
      a(href="/users/playerid/{{challenger}}") {{challengerName}}
    li 
      a(href="/users/playerid/{{opponent}}") {{opponentName}}
    li
      a(href="/activities/{{activity}}") {{getActivity.name}}
      
template(name="User")
  h1 User view
  ul
    li {{username}}